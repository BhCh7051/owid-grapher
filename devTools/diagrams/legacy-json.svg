<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: G Pages: 1 -->
<svg width="766pt" height="1164pt"
 viewBox="0.00 0.00 766.00 1163.74" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1159.74)">
<title>G</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1159.74 762,-1159.74 762,4 -4,4"/>
<g id="clust1" class="cluster">
<title>clusterLegacyToOwidTableAndDimensions</title>
<polygon fill="none" stroke="black" points="8,-8 8,-1111.74 750,-1111.74 750,-8 8,-8"/>
<text text-anchor="middle" x="379" y="-1096.54" font-family="Times,serif" font-size="14.00">convert legacy json to OwidTable</text>
</g>
<g id="clust2" class="cluster">
<title>clusterDimensions</title>
<polygon fill="none" stroke="black" points="16,-224 16,-964.74 742,-964.74 742,-224 16,-224"/>
<text text-anchor="middle" x="379" y="-949.54" font-family="Times,serif" font-size="14.00">Per dimension</text>
</g>
<!-- fetch -->
<g id="node1" class="node">
<title>fetch</title>
<ellipse fill="none" stroke="black" cx="506" cy="-1137.74" rx="79.89" ry="18"/>
<text text-anchor="middle" x="506" y="-1134.04" font-family="Times,serif" font-size="14.00">fetch Json data</text>
</g>
<!-- setDefaultColumns -->
<g id="node2" class="node">
<title>setDefaultColumns</title>
<ellipse fill="none" stroke="black" cx="506" cy="-1062.74" rx="202.26" ry="18"/>
<text text-anchor="middle" x="506" y="-1059.04" font-family="Times,serif" font-size="14.00">set default columns: entityname, id, code</text>
</g>
<!-- fetch&#45;&gt;setDefaultColumns -->
<g id="edge1" class="edge">
<title>fetch&#45;&gt;setDefaultColumns</title>
<path fill="none" stroke="black" d="M506,-1119.44C506,-1110.99 506,-1100.61 506,-1091.11"/>
<polygon fill="black" stroke="black" points="509.5,-1090.92 506,-1080.92 502.5,-1090.92 509.5,-1090.92"/>
</g>
<!-- setOptionalColorColumn -->
<g id="node3" class="node">
<title>setOptionalColorColumn</title>
<ellipse fill="none" stroke="black" cx="506" cy="-990.74" rx="198.47" ry="18"/>
<text text-anchor="middle" x="506" y="-987.04" font-family="Times,serif" font-size="14.00">Set optional color column from selection</text>
</g>
<!-- setDefaultColumns&#45;&gt;setOptionalColorColumn -->
<g id="edge2" class="edge">
<title>setDefaultColumns&#45;&gt;setOptionalColorColumn</title>
<path fill="none" stroke="black" d="M506,-1044.44C506,-1036.72 506,-1027.45 506,-1018.85"/>
<polygon fill="black" stroke="black" points="509.5,-1018.84 506,-1008.84 502.5,-1018.84 509.5,-1018.84"/>
</g>
<!-- perDimensionAndOptionalTargetTime -->
<g id="node4" class="node">
<title>perDimensionAndOptionalTargetTime</title>
<ellipse fill="none" stroke="black" cx="506" cy="-915.74" rx="226.66" ry="18"/>
<text text-anchor="middle" x="506" y="-912.04" font-family="Times,serif" font-size="14.00">Prepare each dimension (per targetyear if set)</text>
</g>
<!-- setOptionalColorColumn&#45;&gt;perDimensionAndOptionalTargetTime -->
<g id="edge3" class="edge">
<title>setOptionalColorColumn&#45;&gt;perDimensionAndOptionalTargetTime</title>
<path fill="none" stroke="black" d="M506,-972.44C506,-963.99 506,-953.61 506,-944.11"/>
<polygon fill="black" stroke="black" points="509.5,-943.92 506,-933.92 502.5,-943.92 509.5,-943.92"/>
</g>
<!-- copyBaseColumns -->
<g id="node5" class="node">
<title>copyBaseColumns</title>
<ellipse fill="none" stroke="black" cx="437" cy="-843.74" rx="221.76" ry="18"/>
<text text-anchor="middle" x="437" y="-840.04" font-family="Times,serif" font-size="14.00">Copy base columns from above into new Map</text>
</g>
<!-- perDimensionAndOptionalTargetTime&#45;&gt;copyBaseColumns -->
<g id="edge4" class="edge">
<title>perDimensionAndOptionalTargetTime&#45;&gt;copyBaseColumns</title>
<path fill="none" stroke="black" d="M488.94,-897.44C480.5,-888.88 470.18,-878.4 460.96,-869.04"/>
<polygon fill="black" stroke="black" points="463.37,-866.51 453.86,-861.84 458.39,-871.42 463.37,-866.51"/>
</g>
<!-- addTimeColums -->
<g id="node6" class="node">
<title>addTimeColums</title>
<ellipse fill="none" stroke="black" cx="420" cy="-771.74" rx="151.37" ry="18"/>
<text text-anchor="middle" x="420" y="-768.04" font-family="Times,serif" font-size="14.00">Add time column (day or year)</text>
</g>
<!-- copyBaseColumns&#45;&gt;addTimeColums -->
<g id="edge5" class="edge">
<title>copyBaseColumns&#45;&gt;addTimeColums</title>
<path fill="none" stroke="black" d="M432.8,-825.44C430.9,-817.64 428.62,-808.25 426.52,-799.57"/>
<polygon fill="black" stroke="black" points="429.92,-798.74 424.15,-789.84 423.11,-800.39 429.92,-798.74"/>
</g>
<!-- addValueColumn -->
<g id="node7" class="node">
<title>addValueColumn</title>
<ellipse fill="none" stroke="black" cx="386" cy="-699.74" rx="92.88" ry="18"/>
<text text-anchor="middle" x="386" y="-696.04" font-family="Times,serif" font-size="14.00">Add value column</text>
</g>
<!-- addTimeColums&#45;&gt;addValueColumn -->
<g id="edge6" class="edge">
<title>addTimeColums&#45;&gt;addValueColumn</title>
<path fill="none" stroke="black" d="M411.6,-753.44C407.73,-745.47 403.05,-735.84 398.76,-727"/>
<polygon fill="black" stroke="black" points="401.83,-725.31 394.31,-717.84 395.53,-728.37 401.83,-725.31"/>
</g>
<!-- addAnnotationsMap -->
<g id="node8" class="node">
<title>addAnnotationsMap</title>
<ellipse fill="none" stroke="black" cx="385" cy="-627.74" rx="163.27" ry="18"/>
<text text-anchor="middle" x="385" y="-624.04" font-family="Times,serif" font-size="14.00">Add optional annotations column</text>
</g>
<!-- addValueColumn&#45;&gt;addAnnotationsMap -->
<g id="edge7" class="edge">
<title>addValueColumn&#45;&gt;addAnnotationsMap</title>
<path fill="none" stroke="black" d="M385.75,-681.44C385.64,-673.72 385.51,-664.45 385.39,-655.85"/>
<polygon fill="black" stroke="black" points="388.89,-655.79 385.24,-645.84 381.89,-655.89 388.89,-655.79"/>
</g>
<!-- fillTimeAndEntityColumns -->
<g id="node9" class="node">
<title>fillTimeAndEntityColumns</title>
<ellipse fill="none" stroke="black" cx="376" cy="-555.74" rx="141.88" ry="18"/>
<text text-anchor="middle" x="376" y="-552.04" font-family="Times,serif" font-size="14.00">Fill time and entity columns</text>
</g>
<!-- addAnnotationsMap&#45;&gt;fillTimeAndEntityColumns -->
<g id="edge8" class="edge">
<title>addAnnotationsMap&#45;&gt;fillTimeAndEntityColumns</title>
<path fill="none" stroke="black" d="M382.78,-609.44C381.78,-601.72 380.59,-592.45 379.49,-583.85"/>
<polygon fill="black" stroke="black" points="382.95,-583.32 378.2,-573.84 376,-584.21 382.95,-583.32"/>
</g>
<!-- fillValueColumn -->
<g id="node10" class="node">
<title>fillValueColumn</title>
<ellipse fill="none" stroke="black" cx="375" cy="-483.74" rx="237.46" ry="18"/>
<text text-anchor="middle" x="375" y="-480.04" font-family="Times,serif" font-size="14.00">Fill value column with optional conversion factor</text>
</g>
<!-- fillTimeAndEntityColumns&#45;&gt;fillValueColumn -->
<g id="edge9" class="edge">
<title>fillTimeAndEntityColumns&#45;&gt;fillValueColumn</title>
<path fill="none" stroke="black" d="M375.75,-537.44C375.64,-529.72 375.51,-520.45 375.39,-511.85"/>
<polygon fill="black" stroke="black" points="378.89,-511.79 375.24,-501.84 371.89,-511.89 378.89,-511.79"/>
</g>
<!-- buildVariableTable -->
<g id="node11" class="node">
<title>buildVariableTable</title>
<ellipse fill="none" stroke="black" cx="371" cy="-411.74" rx="102.08" ry="18"/>
<text text-anchor="middle" x="371" y="-408.04" font-family="Times,serif" font-size="14.00">Build variable table</text>
</g>
<!-- fillValueColumn&#45;&gt;buildVariableTable -->
<g id="edge10" class="edge">
<title>fillValueColumn&#45;&gt;buildVariableTable</title>
<path fill="none" stroke="black" d="M374.01,-465.44C373.57,-457.72 373.04,-448.45 372.55,-439.85"/>
<polygon fill="black" stroke="black" points="376.04,-439.63 371.98,-429.84 369.05,-440.03 376.04,-439.63"/>
</g>
<!-- dropTimecolumnIfTargetTimeSet -->
<g id="node12" class="node">
<title>dropTimecolumnIfTargetTimeSet</title>
<ellipse fill="none" stroke="black" cx="369" cy="-330.87" rx="345.14" ry="26.74"/>
<text text-anchor="middle" x="369" y="-334.67" font-family="Times,serif" font-size="14.00">Scatter and Marimekko: drop the time column if targetTime is set</text>
<text text-anchor="middle" x="369" y="-319.67" font-family="Times,serif" font-size="14.00">(for entity&#45;only join later)</text>
</g>
<!-- buildVariableTable&#45;&gt;dropTimecolumnIfTargetTimeSet -->
<g id="edge11" class="edge">
<title>buildVariableTable&#45;&gt;dropTimecolumnIfTargetTimeSet</title>
<path fill="none" stroke="black" d="M370.57,-393.63C370.38,-386.14 370.15,-377.05 369.92,-368.17"/>
<polygon fill="black" stroke="black" points="373.41,-367.86 369.66,-357.95 366.42,-368.04 373.41,-367.86"/>
</g>
<!-- loopForNextDimension -->
<g id="node13" class="node">
<title>loopForNextDimension</title>
<ellipse fill="none" stroke="black" cx="440" cy="-250" rx="130.78" ry="18"/>
<text text-anchor="middle" x="440" y="-246.3" font-family="Times,serif" font-size="14.00">Loop with next dimension</text>
</g>
<!-- dropTimecolumnIfTargetTimeSet&#45;&gt;loopForNextDimension -->
<g id="edge12" class="edge">
<title>dropTimecolumnIfTargetTimeSet&#45;&gt;loopForNextDimension</title>
<path fill="none" stroke="black" d="M392.25,-304.05C400.51,-294.87 409.77,-284.58 417.93,-275.52"/>
<polygon fill="black" stroke="black" points="420.67,-277.71 424.76,-267.93 415.47,-273.02 420.67,-277.71"/>
</g>
<!-- loopForNextDimension&#45;&gt;perDimensionAndOptionalTargetTime -->
<g id="edge13" class="edge">
<title>loopForNextDimension&#45;&gt;perDimensionAndOptionalTargetTime</title>
<path fill="none" stroke="black" d="M555.04,-258.66C623.09,-265.75 700.3,-279.12 723,-304 755.11,-339.2 733,-363.09 733,-410.74 733,-772.74 733,-772.74 733,-772.74 733,-840.5 659.4,-877.13 596.02,-896.12"/>
<polygon fill="black" stroke="black" points="594.99,-892.77 586.35,-898.91 596.93,-899.5 594.99,-892.77"/>
</g>
<!-- fullJoin -->
<g id="node14" class="node">
<title>fullJoin</title>
<ellipse fill="none" stroke="black" cx="440" cy="-178" rx="230.16" ry="18"/>
<text text-anchor="middle" x="440" y="-174.3" font-family="Times,serif" font-size="14.00">Outer join all partial dimension tables together</text>
</g>
<!-- loopForNextDimension&#45;&gt;fullJoin -->
<g id="edge14" class="edge">
<title>loopForNextDimension&#45;&gt;fullJoin</title>
<path fill="none" stroke="black" d="M440,-231.7C440,-223.98 440,-214.71 440,-206.11"/>
<polygon fill="black" stroke="black" points="443.5,-206.1 440,-196.1 436.5,-206.1 443.5,-206.1"/>
</g>
<!-- addSharedTimeColumn -->
<g id="node15" class="node">
<title>addSharedTimeColumn</title>
<ellipse fill="none" stroke="black" cx="440" cy="-106" rx="124.28" ry="18"/>
<text text-anchor="middle" x="440" y="-102.3" font-family="Times,serif" font-size="14.00">Add shared time column</text>
</g>
<!-- fullJoin&#45;&gt;addSharedTimeColumn -->
<g id="edge15" class="edge">
<title>fullJoin&#45;&gt;addSharedTimeColumn</title>
<path fill="none" stroke="black" d="M440,-159.7C440,-151.98 440,-142.71 440,-134.11"/>
<polygon fill="black" stroke="black" points="443.5,-134.1 440,-124.1 436.5,-134.1 443.5,-134.1"/>
</g>
<!-- innerTable -->
<g id="node16" class="node">
<title>innerTable</title>
<ellipse fill="none" stroke="black" cx="440" cy="-34" rx="133.78" ry="18"/>
<text text-anchor="middle" x="440" y="-30.3" font-family="Times,serif" font-size="14.00">Set inner table on grapher</text>
</g>
<!-- addSharedTimeColumn&#45;&gt;innerTable -->
<g id="edge16" class="edge">
<title>addSharedTimeColumn&#45;&gt;innerTable</title>
<path fill="none" stroke="black" d="M440,-87.7C440,-79.98 440,-70.71 440,-62.11"/>
<polygon fill="black" stroke="black" points="443.5,-62.1 440,-52.1 436.5,-62.1 443.5,-62.1"/>
</g>
</g>
</svg>
